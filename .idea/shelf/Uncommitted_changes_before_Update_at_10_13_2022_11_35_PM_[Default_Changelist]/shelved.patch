Index: app/src/main/java/com/xiaobo/smartcalendar/Model/Events/MyEvent.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.xiaobo.smartcalendar.Model.Events;\r\n\r\nimport android.util.Log;\r\n\r\nimport com.xiaobo.smartcalendar.Model.Contradiction.MyTemporalInconsistency;\r\n\r\nimport java.util.Date;\r\nimport java.util.UUID;\r\n\r\npublic class MyEvent {\r\n\r\n    private UUID mId;\r\n    private int _id;\r\n\r\n    private ActivityTitle mActivityTitle;           // 事件标题\r\n    private TypeOfEvent mTypeOfEvent;               // 事件类型\r\n    private DateOfEvent mDateOfEvent;               // 事件起止时间\r\n    private TargetLocation mTargetLocation;         // 事件位置\r\n    private Participant mParticipant;               // 事件参与者\r\n    private Periodicity mPeriodicity;               // 事件周期性\r\n    private Schedulability mSchedulability;         // 事件可调节性\r\n    private Boolean mImportance;                    // 事件重要性\r\n    String mHost;                                   // 事件主持人\r\n\r\n    long minimum_duration;                          // 最短持续时间\r\n    Date earliest_start_time;                       // 最早开始时间\r\n    Date latest_start_time;                         // 最晚开始时间\r\n    Date earliest_end_time;                         // 最早结束时间\r\n    Date latest_end_time;                           // 最晚结束时间\r\n\r\n    private long commutingTime = -1;\r\n\r\n    private boolean isClashWithOther = false;       // 是否与其他事件有冲突的标志\r\n    private boolean isEdited = false;               // 是否编辑完成\r\n\r\n    // 构造方法\r\n    public MyEvent() {\r\n        this.mId = UUID.randomUUID();\r\n        this.isEdited = false;\r\n\r\n        this.mTypeOfEvent = new TypeOfEvent();\r\n        this.mActivityTitle = new ActivityTitle();\r\n        this.mDateOfEvent = new DateOfEvent();\r\n        this.mHost = \"未设定主持人\";\r\n        this.mParticipant = new Participant();\r\n        this.mTargetLocation = new TargetLocation();\r\n        this.mPeriodicity = new Periodicity();\r\n        this.mImportance = false;\r\n\r\n        this.minimum_duration = 0;\r\n        this.earliest_start_time = new Date(0);\r\n        this.latest_start_time = new Date(0);\r\n        this.earliest_end_time = new Date(0);\r\n        this.latest_end_time = new Date(0);\r\n    }\r\n\r\n    // 描述方法\r\n    public String describeMyEvent() {\r\n        StringBuilder str = new StringBuilder();\r\n        str.append(\"事件标题:\" + this.mActivityTitle.getmTitle() + \"\\n\");\r\n        str.append(\"主持人:\" + this.mHost + \"\\n\");\r\n        str.append(\"参与人:\" + this.mParticipant.mParticipant + \"\\n\");\r\n        str.append(\"事件类型:\" + this.mTypeOfEvent.mKind.toString() + \"\\n\");\r\n        str.append(\"目标地点:\" + this.mTargetLocation.getTargetName() + \"\\n\");\r\n//        str.append(\"坐标:\" + this.mTargetLocation.getTargetPoint() + \"\\n\");\r\n        str.append(\"周期性:\" + this.mPeriodicity.mTypeOfPeriodicity.getTypeName() + \"\\n\");\r\n        str.append(\"时间:\" + this.mDateOfEvent.getDate() + \"\\n\");\r\n//        str.append(\"日期:\" + this.mDateOfEvent.getCalendar() + \"\\n\");\r\n//        str.append(\"开始时间:\" + this.mDateOfEvent.getStartPoint() + \"  结束时间\" + this.mDateOfEvent.getEndPoint() + \"\\n\");\r\n        str.append(\"持续时间:\" + this.mDateOfEvent.getDuration() + \"\\n\");\r\n//        str.append(\"是否重要:\" + this.mImportance + \"\\n\");\r\n//        str.append(\"通勤时间:\" + this.commutingTime + \"\\n\");\r\n//        str.append(\"通勤时间:(格式化后):\" + getCommutingDate() + \"\\n\");\r\n        str.append(\"uuid:\" + this.getmId());\r\n        return str.toString();\r\n    }\r\n    // 格式化通勤时间\r\n    public String getCommutingDate() {\r\n        if (this.commutingTime < 0) {\r\n            return \"未能得到通勤时间\";\r\n        }\r\n        else {\r\n            StringBuilder stringBuilder = new StringBuilder();\r\n            stringBuilder.append(this.commutingTime / 60 / 60 + \"小时\");\r\n            stringBuilder.append((this.commutingTime % 3600) / 60 + \"分钟\");\r\n            stringBuilder.append((this.commutingTime % 3600) % 60 + \"秒\");\r\n            return stringBuilder.toString();\r\n        }\r\n    }\r\n\r\n    public UUID getmId() {\r\n        return mId;\r\n    }\r\n\r\n    public void setmId(UUID mId) {\r\n        this.mId = mId;\r\n    }\r\n\r\n    public ActivityTitle getmActivityTitle() {\r\n        return mActivityTitle;\r\n    }\r\n\r\n    public void setmActivityTitle(ActivityTitle mActivityTitle) {\r\n        this.mActivityTitle = mActivityTitle;\r\n    }\r\n\r\n    public TypeOfEvent getmTypeOfEvent() {\r\n        return mTypeOfEvent;\r\n    }\r\n\r\n    public void setmTypeOfEvent(TypeOfEvent mTypeOfEvent) {\r\n        this.mTypeOfEvent = mTypeOfEvent;\r\n    }\r\n\r\n    public DateOfEvent getmDateOfEvent() {\r\n        return mDateOfEvent;\r\n    }\r\n\r\n    public void setmDateOfEvent(DateOfEvent mDateOfEvent) {\r\n        this.mDateOfEvent = mDateOfEvent;\r\n    }\r\n\r\n    public TargetLocation getmTargetLocation() {\r\n        return mTargetLocation;\r\n    }\r\n\r\n    public void setmTargetLocation(TargetLocation mTargetLocation) {\r\n        this.mTargetLocation = mTargetLocation;\r\n    }\r\n\r\n    public Participant getmParticipant() {\r\n        return mParticipant;\r\n    }\r\n\r\n    public void setmParticipant(Participant mParticipant) {\r\n        this.mParticipant = mParticipant;\r\n    }\r\n\r\n    public Periodicity getmPeriodicity() {\r\n        return mPeriodicity;\r\n    }\r\n\r\n    public void setmPeriodicity(Periodicity mPeriodicity) {\r\n        this.mPeriodicity = mPeriodicity;\r\n    }\r\n\r\n    public Schedulability getmSchedulability() {\r\n        return mSchedulability;\r\n    }\r\n\r\n    public void setmSchedulability(Schedulability mSchedulability) {\r\n        this.mSchedulability = mSchedulability;\r\n    }\r\n\r\n    public Boolean getmImportance() {\r\n        return mImportance;\r\n    }\r\n\r\n    public void setmImportance(Boolean mImportance) {\r\n        this.mImportance = mImportance;\r\n    }\r\n\r\n    public String getmHost() {\r\n        return mHost;\r\n    }\r\n\r\n    public void setmHost(String mHost) {\r\n        this.mHost = mHost;\r\n    }\r\n\r\n    public long getMinimum_duration() {\r\n        return minimum_duration;\r\n    }\r\n\r\n    public void setMinimum_duration(long minimum_duration) {\r\n        this.minimum_duration = minimum_duration;\r\n    }\r\n\r\n    public Date getEarliest_start_time() {\r\n        return earliest_start_time;\r\n    }\r\n\r\n    public void setEarliest_start_time(Date earliest_start_time) {\r\n        this.earliest_start_time = earliest_start_time;\r\n    }\r\n\r\n    public Date getLatest_start_time() {\r\n        return latest_start_time;\r\n    }\r\n\r\n    public void setLatest_start_time(Date latest_start_time) {\r\n        this.latest_start_time = latest_start_time;\r\n    }\r\n\r\n    public Date getEarliest_end_time() {\r\n        return earliest_end_time;\r\n    }\r\n\r\n    public void setEarliest_end_time(Date earliest_end_time) {\r\n        this.earliest_end_time = earliest_end_time;\r\n    }\r\n\r\n    public Date getLatest_end_time() {\r\n        return latest_end_time;\r\n    }\r\n\r\n    public void setLatest_end_time(Date latest_end_time) {\r\n        this.latest_end_time = latest_end_time;\r\n    }\r\n\r\n    public long getCommutingTime() {\r\n        return commutingTime;\r\n    }\r\n\r\n    public void setCommutingTime(int commutingTime) {\r\n        this.commutingTime = commutingTime;\r\n    }\r\n\r\n    // 调整事件开始or结束时间点\r\n    public boolean adjustStartTime(MyTemporalInconsistency.EventAction action, long range) {\r\n        try {\r\n            Date startDate = this.getmDateOfEvent().getDate();\r\n            switch (action) {\r\n                case advance:\r\n                    this.getmDateOfEvent().setDate(new Date(startDate.getTime() - range));\r\n                    Log.d(\"MyEvent\", \"事件:\" + this.getmId() + \"开始时间提前了\\n\" + \"新开始时间为:\" + this.getmDateOfEvent().getDate());\r\n                    Log.d(\"MyEvent\", \"事件:\" + this.getmId() + this.getmDateOfEvent().showDate());\r\n                    break;\r\n                case postpone:\r\n                    this.getmDateOfEvent().setDate(new Date(startDate.getTime() + range));\r\n                    Log.d(\"MyEvent\", \"事件:\" + this.getmId() + \"开始时间推迟了了\\n\" + \"新开始时间为:\" + this.getmDateOfEvent().getDate());\r\n                    Log.d(\"MyEvent\", \"事件:\" + this.getmId() + this.getmDateOfEvent().showDate());\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            return true;\r\n        }\r\n        catch (Exception e) {\r\n            e.printStackTrace();\r\n            return false;\r\n        }\r\n    }\r\n    public boolean adjustEndTime(MyTemporalInconsistency.EventAction action, long range) {\r\n        try {\r\n            long eventDuration = this.getmDateOfEvent().getDuration();\r\n            switch (action) {\r\n                case advance:\r\n                    this.getmDateOfEvent().setDuration(eventDuration - range);\r\n                    Log.d(\"MyEvent\", \"事件;\" + this.getmId() + \"结束时间提前了\\n\" + \"新结束时间为:\" + this.getmDateOfEvent().getDate());\r\n                    Log.d(\"MyEvent\", \"事件:\" + this.getmId() + this.getmDateOfEvent().showDate());\r\n                    break;\r\n                case postpone:\r\n                    this.getmDateOfEvent().setDuration(eventDuration + range);\r\n                    Log.d(\"MyEvent\", \"事件;\" + this.getmId() + \"结束时间推迟了\\n\" + \"新结束时间为:\" + this.getmDateOfEvent().getDate());\r\n                    Log.d(\"MyEvent\", \"事件:\" + this.getmId() + this.getmDateOfEvent().showDate());\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            return true;\r\n        }\r\n        catch (Exception e) {\r\n            e.printStackTrace();\r\n            return false;\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/xiaobo/smartcalendar/Model/Events/MyEvent.java b/app/src/main/java/com/xiaobo/smartcalendar/Model/Events/MyEvent.java
--- a/app/src/main/java/com/xiaobo/smartcalendar/Model/Events/MyEvent.java	(revision 78fe4f2d31d0b2f367b4228fe7f01837414bdd89)
+++ b/app/src/main/java/com/xiaobo/smartcalendar/Model/Events/MyEvent.java	(date 1665671559010)
@@ -83,7 +83,7 @@
             StringBuilder stringBuilder = new StringBuilder();
             stringBuilder.append(this.commutingTime / 60 / 60 + "小时");
             stringBuilder.append((this.commutingTime % 3600) / 60 + "分钟");
-            stringBuilder.append((this.commutingTime % 3600) % 60 + "秒");
+//            stringBuilder.append((this.commutingTime % 3600) % 60 + "秒");
             return stringBuilder.toString();
         }
     }
Index: app/src/main/AndroidManifest.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    package=\"com.xiaobo.smartcalendar\">\r\n    <!-- 权限设置 -->\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n    <uses-permission android:name=\"android.permission.SYSTEM_ALERT_WINDOW\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" /> <!-- 用于访问GPS定位 -->\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" /> <!-- 获取运营商信息，用于支持提供运营商信息相关的接口 -->\r\n    <uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /> <!-- 用于访问wifi网络信息，wifi信息会用于进行网络定位 -->\r\n    <uses-permission android:name=\"android.permission.ACCESS_WIFI_STATE\" /> <!-- 这个权限用于获取wifi的获取权限，wifi信息会用来进行网络定位 -->\r\n    <uses-permission android:name=\"android.permission.CHANGE_WIFI_STATE\" /> <!-- 用于访问网络，网络定位需要上网 -->\r\n    <uses-permission android:name=\"android.permission.INTERNET\" /> <!-- 用于读取手机当前的状态 -->\r\n    <uses-permission android:name=\"android.permission.READ_PHONE_STATE\" /> <!-- 写入扩展存储，向扩展卡写入数据，用于写入缓存定位数据 -->\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" /> <!-- 用于申请调用A-GPS模块 -->\r\n    <uses-permission android:name=\"android.permission.ACCESS_LOCATION_EXTRA_COMMANDS\" /> <!-- 用于申请获取蓝牙信息进行室内定位 -->\r\n    <uses-permission android:name=\"android.permission.BLUETOOTH\" />\r\n    <uses-permission android:name=\"android.permission.BLUETOOTH_ADMIN\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_BACKGROUND_LOCATION\" />\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:networkSecurityConfig=\"@xml/network_security_config\"\r\n        android:roundIcon=\"@drawable/calendar\"\r\n        android:supportsRtl=\"true\"\r\n        android:theme=\"@style/Theme.SmartCalendar\">\r\n        <activity\r\n            android:name=\".activity.AdjustActivity.AdjustActivity\"\r\n            android:exported=\"false\" />\r\n        <activity\r\n            android:name=\".activity.TestActivity.TableActivity\"\r\n            android:exported=\"false\" />\r\n        <activity\r\n            android:name=\".activity.PoiSearchWithoutMap.PoiSearchWithoutMapActivity\"\r\n            android:exported=\"true\" />\r\n        <activity\r\n            android:name=\".activity.SearchLocationActivity.InputTipsActivity\"\r\n            android:exported=\"true\" />\r\n        <activity\r\n            android:name=\".activity.SearchLocationActivity.SearchLocationActivity\"\r\n            android:exported=\"true\" />\r\n        <activity android:name=\".activity.TestActivity.TestActivity\" />\r\n        <activity android:name=\".activity.SetingActivity.SetingActivity\" />\r\n        <activity android:name=\".activity.RegisterActivity.RegisterActivity\" />\r\n        <activity android:name=\".activity.LoginActivity.LoginActivity\" />\r\n        <activity android:name=\".activity.AddRuleActivity.AddRuleActivity\" />\r\n        <activity android:name=\".activity.AddEventActivity.AddEventActivity\" />\r\n        <activity android:name=\".MainActivity\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity> <!-- 高德key -->\r\n        <!-- android:Desktopvalue =\"d36a9cb6b0113491dad0daa3582e6148\" -->\r\n        <!-- android:Yogavalue =\"c5131b2f39dc1ce9a7648ea657ceddbe\" -->\r\n        <meta-data\r\n            android:name=\"com.amap.api.v2.apikey\"\r\n            android:value=\"b30977c88ac77ee00d97ca2221f5a8df\" />\r\n\r\n        <service android:name=\".Service.BackgroundService.ReceivedBroadcastService\" />\r\n        <service android:name=\".Service.HttpRequest.HttpRequestIntentService\" />\r\n        <service android:name=\".Service.CalRoute.CalRouteIntentService\" />\r\n        <service android:name=\".Service.Location.LocationService\" />\r\n        <service android:name=\".Service.MainService.MainService\">\r\n            <intent-filter>\r\n                <action android:name=\"com.xiaobo.smartcalendar.mainservice\" />\r\n            </intent-filter>\r\n        </service>\r\n        <service android:name=\"com.amap.api.location.APSService\" />\r\n    </application>\r\n\r\n</manifest>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/AndroidManifest.xml b/app/src/main/AndroidManifest.xml
--- a/app/src/main/AndroidManifest.xml	(revision 78fe4f2d31d0b2f367b4228fe7f01837414bdd89)
+++ b/app/src/main/AndroidManifest.xml	(date 1665663345992)
@@ -57,7 +57,7 @@
         <!-- android:Yogavalue ="c5131b2f39dc1ce9a7648ea657ceddbe" -->
         <meta-data
             android:name="com.amap.api.v2.apikey"
-            android:value="b30977c88ac77ee00d97ca2221f5a8df" />
+            android:value="d36a9cb6b0113491dad0daa3582e6148" />
 
         <service android:name=".Service.BackgroundService.ReceivedBroadcastService" />
         <service android:name=".Service.HttpRequest.HttpRequestIntentService" />
Index: gradle.properties
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+># Project-wide Gradle settings.\r\n# IDE (e.g. Android Studio) users:\r\n# Gradle settings configured through the IDE *will override*\r\n# any settings specified in this file.\r\n# For more details on how to configure your build environment visit\r\n# http://www.gradle.org/docs/current/userguide/build_environment.html\r\n# Specifies the JVM arguments used for the daemon process.\r\n# The setting is particularly useful for tweaking memory settings.\r\norg.gradle.jvmargs=-Xmx2048m -Dfile.encoding=UTF-8\r\n# When configured, Gradle will run in incubating parallel mode.\r\n# This option should only be used with decoupled projects. More details, visit\r\n# http://www.gradle.org/docs/current/userguide/multi_project_builds.html#sec:decoupled_projects\r\n# org.gradle.parallel=true\r\n# AndroidX package structure to make it clearer which packages are bundled with the\r\n# Android operating system, and which are packaged with your app\"s APK\r\n# https://developer.android.com/topic/libraries/support-library/androidx-rn\r\nandroid.useAndroidX=true\r\n# Automatically convert third-party libraries to use AndroidX\r\nandroid.enableJetifier=true\r\n\r\n# used in OPPO findX\r\nandroid.injected.testOnly=false
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>ISO-8859-1
===================================================================
diff --git a/gradle.properties b/gradle.properties
--- a/gradle.properties	(revision 78fe4f2d31d0b2f367b4228fe7f01837414bdd89)
+++ b/gradle.properties	(date 1665663345999)
@@ -6,11 +6,11 @@
 # http://www.gradle.org/docs/current/userguide/build_environment.html
 # Specifies the JVM arguments used for the daemon process.
 # The setting is particularly useful for tweaking memory settings.
-org.gradle.jvmargs=-Xmx2048m -Dfile.encoding=UTF-8
+org.gradle.jvmargs=-Xmx4096m -Dfile.encoding=UTF-8
 # When configured, Gradle will run in incubating parallel mode.
 # This option should only be used with decoupled projects. More details, visit
 # http://www.gradle.org/docs/current/userguide/multi_project_builds.html#sec:decoupled_projects
-# org.gradle.parallel=true
+ org.gradle.parallel=true
 # AndroidX package structure to make it clearer which packages are bundled with the
 # Android operating system, and which are packaged with your app"s APK
 # https://developer.android.com/topic/libraries/support-library/androidx-rn
@@ -19,4 +19,7 @@
 android.enableJetifier=true
 
 # used in OPPO findX
-android.injected.testOnly=false
\ No newline at end of file
+android.injected.testOnly=false
+
+#Enable daemon
+org.gradle.daemon=true
\ No newline at end of file
Index: app/src/main/java/com/xiaobo/smartcalendar/activity/LoginActivity/LoginActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.xiaobo.smartcalendar.activity.LoginActivity;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.os.Looper;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.gson.Gson;\r\nimport com.xiaobo.smartcalendar.Public.ProfileManager;\r\nimport com.xiaobo.smartcalendar.R;\r\nimport com.xiaobo.smartcalendar.activity.RegisterActivity.RegisterActivity;\r\n\r\nimport java.io.IOException;\r\n\r\nimport okhttp3.Call;\r\nimport okhttp3.Callback;\r\nimport okhttp3.FormBody;\r\nimport okhttp3.OkHttpClient;\r\nimport okhttp3.Request;\r\nimport okhttp3.RequestBody;\r\nimport okhttp3.Response;\r\n\r\nimport static com.xiaobo.smartcalendar.Public.PublicVaribale.LOGIN_SUCCESS;\r\nimport static com.xiaobo.smartcalendar.Public.PublicVaribale.LOGIN_URL;\r\n\r\npublic class LoginActivity extends AppCompatActivity {\r\n\r\n    EditText usernameEditText;\r\n    EditText passwordEditText;\r\n    Button loginButton;\r\n    Button forgetPosswordButton;\r\n    Button registerButton;\r\n\r\n    String username;\r\n    String password;\r\n\r\n    String token;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_login);\r\n\r\n        Intent i = getIntent();\r\n        Bundle userInfo = i.getExtras();\r\n        if (userInfo != null) {\r\n            try {\r\n                username = userInfo.getString(\"username\");\r\n                password = userInfo.getString(\"password\");\r\n            }\r\n            catch (Exception e) {\r\n                Log.e(\"LoginActivity\", \"获取用户信息错误\");\r\n            }\r\n        }\r\n\r\n        token = ProfileManager.get(getApplicationContext()).getToken();\r\n\r\n        usernameEditText = findViewById(R.id.username_login);\r\n        passwordEditText = findViewById(R.id.password_login);\r\n        loginButton = findViewById(R.id.button_login);\r\n        forgetPosswordButton = findViewById(R.id.button_forget_password);\r\n        registerButton = findViewById(R.id.button_register_on_loginactivity);\r\n\r\n        usernameEditText.setText(\"username001\");\r\n        passwordEditText.setText(\"123456\");\r\n\r\n        if (!(username == null)) {\r\n            usernameEditText.setText(username);\r\n        }\r\n        if (!(password == null)) {\r\n            passwordEditText.setText(password);\r\n        }\r\n\r\n        username = usernameEditText.getText().toString();\r\n        password = passwordEditText.getText().toString();\r\n\r\n        loginButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Log.d(\"LoginActivity\", \"用户点击了登录按钮\");\r\n                if (usernameEditText.toString().length() == 0 || passwordEditText.toString().length() == 0) {\r\n                    Toast.makeText(LoginActivity.this, \"用户名或密码不能为空\", Toast.LENGTH_SHORT).show();\r\n                }\r\n                else {\r\n                    String login_username = usernameEditText.getText().toString();\r\n                    String login_password = passwordEditText.getText().toString();\r\n                    String request = UserLogin(LOGIN_URL, login_username, login_password);\r\n                }\r\n            }\r\n        });\r\n\r\n        forgetPosswordButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Log.d(\"LoginActivity\", \"用户点击了忘记密码按钮\");\r\n            }\r\n        });\r\n\r\n        registerButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Log.d(\"LoginActivity\", \"用户点击了注册按钮\");\r\n                Intent i = new Intent(LoginActivity.this, RegisterActivity.class);\r\n                i.putExtra(\"username\", usernameEditText.getText().toString());\r\n                startActivityForResult(i, 1003);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void AfterLogin(String request) {\r\n        // 存储token\r\n        ProfileManager.get(getApplicationContext()).setToken(token);\r\n        Looper.prepare();\r\n        Toast.makeText(LoginActivity.this, request, Toast.LENGTH_SHORT).show();\r\n        Looper.loop();\r\n    }\r\n\r\n    /**\r\n     * 登录\r\n     * @param url       URL\r\n     * @param username  用户名\r\n     * @param password  密码\r\n     * @return\r\n     */\r\n    private String UserLogin(String url, String username, String password) {\r\n        String action = \"login\";\r\n        String login_mode = \"login_verify_use_password\";\r\n        final StringBuffer state = new StringBuffer();\r\n\r\n        OkHttpClient client = new OkHttpClient();\r\n        RequestBody requestBody = new FormBody.Builder()\r\n                .add(\"action\", action)\r\n                .add(\"login_mode\", login_mode)\r\n                .add(\"username\", username)\r\n                .add(\"password\", password)\r\n                .build();\r\n\r\n        // 不弄成数组的话  会报错\r\n        final LoginModel[] model = {null};\r\n\r\n        final Request request = new Request.Builder()\r\n                .url(url)\r\n                .post(requestBody)\r\n                .build();\r\n        Call call = client.newCall(request);;\r\n        call.enqueue(new Callback() {\r\n            @Override\r\n            public void onFailure(Call call, IOException e) {\r\n                Log.e(\"用户登陆失败\", e.toString());\r\n            }\r\n\r\n            @Override\r\n            public void onResponse(Call call, Response response) throws IOException {\r\n                String result= response.body().string();\r\n                Gson gson = new Gson();\r\n                model[0] = gson.fromJson(result, LoginModel.class);\r\n                if (response.isSuccessful()) {\r\n                    Log.d(\"登陆成功\", \"response ----->\" + result);\r\n                    state.append(\"josn请求码 -> \" + response.code() + \"\\n\");\r\n                    state.append(\"登陆返回结果 ->\" + model[0].getMsg() + \"\\n\");\r\n                    token = model[0].getToken();\r\n                    // 存储token\r\n                    ProfileManager.get(getApplicationContext()).setToken(token);\r\n\r\n                    String state = LOGIN_SUCCESS;\r\n                    // 登陆成功发出广播\r\n                    sendMessage(result, state);\r\n\r\n                    finish();\r\n                }\r\n                else {\r\n                    Log.e(\"登陆错误 -> \", result);\r\n                    state.append(model[0].getMsg());\r\n                }\r\n                AfterLogin(model[0].getMsg());\r\n            }\r\n        });\r\n\r\n        return state.toString();\r\n    }\r\n\r\n    // 发送通知 发送接收到的信息\r\n    private void sendMessage(String str, String state) {\r\n        Intent i = new Intent();\r\n        i.setAction(\"com.login_state\");\r\n        i.putExtra(\"massage\", str);\r\n        i.putExtra(\"state\", state);\r\n\r\n        this.sendBroadcast(i);\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/xiaobo/smartcalendar/activity/LoginActivity/LoginActivity.java b/app/src/main/java/com/xiaobo/smartcalendar/activity/LoginActivity/LoginActivity.java
--- a/app/src/main/java/com/xiaobo/smartcalendar/activity/LoginActivity/LoginActivity.java	(revision 78fe4f2d31d0b2f367b4228fe7f01837414bdd89)
+++ b/app/src/main/java/com/xiaobo/smartcalendar/activity/LoginActivity/LoginActivity.java	(date 1665663346006)
@@ -84,6 +84,7 @@
             @Override
             public void onClick(View view) {
                 Log.d("LoginActivity", "用户点击了登录按钮");
+                Log.d("LoginActivity", "username is " + username + ", password is " + password);
                 if (usernameEditText.toString().length() == 0 || passwordEditText.toString().length() == 0) {
                     Toast.makeText(LoginActivity.this, "用户名或密码不能为空", Toast.LENGTH_SHORT).show();
                 }
Index: gradle/wrapper/gradle-wrapper.properties
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>#Thu Apr 15 22:47:30 CST 2021\r\ndistributionBase=GRADLE_USER_HOME\r\ndistributionPath=wrapper/dists\r\nzipStoreBase=GRADLE_USER_HOME\r\nzipStorePath=wrapper/dists\r\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-6.7.1-bin.zip\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>ISO-8859-1
===================================================================
diff --git a/gradle/wrapper/gradle-wrapper.properties b/gradle/wrapper/gradle-wrapper.properties
--- a/gradle/wrapper/gradle-wrapper.properties	(revision 78fe4f2d31d0b2f367b4228fe7f01837414bdd89)
+++ b/gradle/wrapper/gradle-wrapper.properties	(date 1665663346013)
@@ -1,6 +1,6 @@
-#Thu Apr 15 22:47:30 CST 2021
+#Sat Oct 01 19:28:15 CST 2022
 distributionBase=GRADLE_USER_HOME
+distributionUrl=https\://services.gradle.org/distributions/gradle-6.7.1-bin.zip
 distributionPath=wrapper/dists
-zipStoreBase=GRADLE_USER_HOME
 zipStorePath=wrapper/dists
-distributionUrl=https\://services.gradle.org/distributions/gradle-6.7.1-bin.zip
+zipStoreBase=GRADLE_USER_HOME
Index: .idea/jarRepositories.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"RemoteRepositoriesConfiguration\">\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"central\" />\r\n      <option name=\"name\" value=\"Maven Central repository\" />\r\n      <option name=\"url\" value=\"https://repo1.maven.org/maven2\" />\r\n    </remote-repository>\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"jboss.community\" />\r\n      <option name=\"name\" value=\"JBoss Community repository\" />\r\n      <option name=\"url\" value=\"https://repository.jboss.org/nexus/content/repositories/public/\" />\r\n    </remote-repository>\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"BintrayJCenter\" />\r\n      <option name=\"name\" value=\"BintrayJCenter\" />\r\n      <option name=\"url\" value=\"https://jcenter.bintray.com/\" />\r\n    </remote-repository>\r\n    <remote-repository>\r\n      <option name=\"id\" value=\"Google\" />\r\n      <option name=\"name\" value=\"Google\" />\r\n      <option name=\"url\" value=\"https://dl.google.com/dl/android/maven2/\" />\r\n    </remote-repository>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/jarRepositories.xml b/.idea/jarRepositories.xml
--- a/.idea/jarRepositories.xml	(revision 78fe4f2d31d0b2f367b4228fe7f01837414bdd89)
+++ b/.idea/jarRepositories.xml	(date 1665663346020)
@@ -21,5 +21,10 @@
       <option name="name" value="Google" />
       <option name="url" value="https://dl.google.com/dl/android/maven2/" />
     </remote-repository>
+    <remote-repository>
+      <option name="id" value="maven" />
+      <option name="name" value="maven" />
+      <option name="url" value="https://maven.aliyun.com/repository/google/" />
+    </remote-repository>
   </component>
 </project>
\ No newline at end of file
Index: app/build.gradle
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>plugins {\r\n    id 'com.android.application'\r\n}\r\n\r\nandroid {\r\n    compileSdkVersion 30\r\n    buildToolsVersion \"30.0.3\"\r\n\r\n    defaultConfig {\r\n        applicationId \"com.xiaobo.smartcalendar\"\r\n        minSdkVersion 26\r\n        targetSdkVersion 30\r\n        versionCode 1\r\n        versionName \"1.1\"\r\n\r\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation 'androidx.appcompat:appcompat:1.1.0'\r\n    implementation 'com.google.android.material:material:1.1.0'\r\n    implementation 'androidx.constraintlayout:constraintlayout:1.1.3'\r\n    implementation 'androidx.recyclerview:recyclerview:1.2.1'\r\n    testImplementation 'junit:junit:4.+'\r\n    androidTestImplementation 'androidx.test.ext:junit:1.1.1'\r\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0'\r\n\r\n    compileOnly 'org.projectlombok:lombok:1.18.16'\r\n    annotationProcessor 'org.projectlombok:lombok:1.18.16'\r\n    //noinspection GradleCompatible\r\n//    implementation 'androidx.appcompat:appcompat:1.2.0'\r\n\r\n    // 首页日历\r\n    implementation 'com.haibin:calendarview:3.7.1'\r\n    // HTTP请求\r\n    implementation 'com.squareup.okhttp3:okhttp:3.11.0'\r\n    // 路径计算\r\n    implementation 'com.amap.api:search:latest.integration'\r\n    // 定位\r\n//    implementation 'com.amap.api:location:latest.integration'\r\n    // 地图\r\n    implementation 'com.amap.api:3dmap:latest.integration'\r\n    // JSON解析\r\n    implementation 'com.google.code.gson:gson:2.8.5'\r\n    // pickerview\r\n    implementation 'com.contrarywind:Android-PickerView:4.1.9'\r\n    // 权限请求\r\n    implementation 'com.yanzhenjie:permission:2.0.3'\r\n    // json格式化\r\n    implementation 'com.alibaba:fastjson:1.1.72.android'\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/build.gradle b/app/build.gradle
--- a/app/build.gradle	(revision 78fe4f2d31d0b2f367b4228fe7f01837414bdd89)
+++ b/app/build.gradle	(date 1665663346025)
@@ -14,6 +14,10 @@
         versionName "1.1"
 
         testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
+
+        aaptOptions.cruncherEnabled = false
+        aaptOptions.useNewCruncher = false
+
     }
 
     buildTypes {
